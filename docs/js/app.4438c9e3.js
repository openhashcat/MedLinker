(function(t){function e(e){for(var r,o,i=e[0],u=e[1],l=e[2],p=0,b=[];p<i.length;p++)o=i[p],a[o]&&b.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);c&&c(e);while(b.length)b.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},s=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var c=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("64a9"),a=n.n(r);a.a},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("b-container",{attrs:{fluid:""}},[n("Header",{attrs:{name:"MedLinker",content:"Copyright preservation, article publishing, data management."}}),n("Main"),n("Footer",{attrs:{name:"Hashcat"}})],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",[n("b-col",[n("header",[n("div",[n("b-jumbotron",{attrs:{"bg-variant":"info","text-variant":"white"}},[n("template",{slot:"header"},[n("h2",[t._v("\n                            "+t._s(t.name)+"\n                        ")])]),n("template",{slot:"lead"},[t._v("\n                        "+t._s(t.content)+"\n                    ")])],2)],1)])])],1)},i=[],u={name:"Header",props:["name","content"]},l=u,c=n("2877"),p=Object(c["a"])(l,o,i,!1,null,null,null),b=p.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"pt-4 my-md-5 pt-md-5 border-top"},[n("b-row",[n("b-col",{attrs:{cols:"2"}}),n("b-col",[n("small",{staticClass:"d-block mb-3 text-muted"},[t._v("powered by "+t._s(t.name)+". ")])]),n("b-col",{attrs:{cols:"6"}}),n("b-col",{attrs:{cols:"2"}})],1)],1)},d=[],h={name:"Footer",props:["name"]},m=h,v=Object(c["a"])(m,f,d,!1,null,null,null),y=v.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",[n("b-col",{attrs:{cols:"12",offset:"0",md:"8","offset-md":"2"}},[n("Search",{attrs:{placeholder:"文章ID",searchlabel:"查找"},on:{search:function(e){return t.getData(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getData(e)}}})],1)],1),n("hr"),n("b-row",[n("b-col",{attrs:{cols:"12",offset:"0",md:"8","offset-md":"2"}},[n("Tablist",{attrs:{posts:t.data}})],1)],1)],1)},g=[],_=(n("6762"),n("2fdb"),n("96cf"),n("3b8d")),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-input-group",{staticClass:"mt-3",attrs:{prepend:t.label}},[n("b-form-input",{attrs:{state:t.inputstate,placeholder:"0XX...XX"},model:{value:t.searchstr,callback:function(e){t.searchstr=e},expression:"searchstr"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"info"},on:{click:t.searcher,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searcher(e)}}},[t._v(t._s(t.searchlabel))])],1)],1)},k=[],O={name:"Search",props:["placeholder","searchlabel"],data:function(){return{searchstr:"",inputstate:null}},methods:{searcher:function(){var t=/^(0x|0X)[0-9a-fA-F]{64}$/g;t.test(this.searchstr)?(this.$emit("search",this.searchstr),this.inputstate=!0):(console.log("match error"),this.inputstate=!1)}},computed:{label:function(){return"请输入"+this.placeholder+"："}}},j=O,P=Object(c["a"])(j,x,k,!1,null,null,null),C=P.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{role:"tablist"}},t._l(t.posts,function(e){return n("Card",t._b({key:e.id},"Card",e,!1))}),1)},S=[],$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("h5",{staticClass:"mb-0"},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.id,expression:"id"}],attrs:{block:"",href:"#"}},[t._v(t._s(t.name))])],1)]),n("b-collapse",{attrs:{id:t.id,visible:t.visible,accordion:"my-accordion",role:"tabpanel"}},[n("b-card-body",[n("b-card-text",[n("b-alert",{attrs:{show:"",variant:"success"}},[n("p",[t._v("\n                    文章哈希："+t._s(t.id)+"\n                    ")]),n("hr"),n("p",{staticClass:"mb-0"},[t._v("\n                    文章记录区块："),n("a",{attrs:{href:"#"}},[t._v(t._s(t.block_number))])])]),n("p",[t._v("\n                作者： "+t._s(t.author)+"\n                ")]),n("p",[t._v("\n                可用链接：\n                ")]),n("b-list-group",t._l(t.urls,function(e){return n("b-list-group-item",{key:e},[t._v(" "+t._s(e)+" ")])}),1)],1)],1)],1)],1)},E=[],R={props:["id","name","author","visible","block_number","urls"]},N=R,T=Object(c["a"])(N,$,E,!1,null,null,null),H=T.exports,J={name:"Tablist",props:["posts"],components:{Card:H}},X=J,D=Object(c["a"])(X,M,S,!1,null,null,null),F=D.exports,B=n("d225"),I=n("b0b4"),L=n("e573"),U=n.n(L),A=function(){function t(e,n){var r;Object(B["a"])(this,t),"undefined"!==typeof window.ethereum||"undefined"!==typeof window.web3?(r=window["ethereum"]||window.web3.currentProvider,this.writeable=!0):(r=new U.a.providers.HttpProvider("https://rinkeby.infura.io/v3/e98a8cf4294243dfa895c02bfe2671aa"),this.writeable=!1),this.web3=new U.a(r),this.abi=new this.web3.eth.Contract(e,n)}return Object(I["a"])(t,[{key:"upload",value:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(e){var n,r,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=this.web3.utils.utf8ToHex(JSON.stringify(e)),r=this.web3.sha3(n),a=this.abi.methods.newPostProfile(r,n),t.next=5,ethereum.enable();case 5:return s=t.sent,t.next=8,a.send({from:s[0]});case 8:return t.sent,t.abrupt("return",r);case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"get",value:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.abi.methods.getPostProfile(e).call();case 2:return n=t.sent,r=JSON.parse(this.web3.utils.toUtf8(n)),r.id=e,t.next=7,this.abi.methods.getBlockNumber(e).call();case 7:return r.block_number=t.sent,t.abrupt("return",r);case 9:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getList",value:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(e,n){var r,a,s,o,i,u,l,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r={},r.data=[],t.next=4,this.abi.methods.totalPost().call();case 4:if(r.total=t.sent,void 0!=r.total){t.next=9;break}return t.abrupt("return",!1);case 9:if(a=e*n,s=(e+1)*n,!(r.total-1<a)){t.next=15;break}return t.abrupt("return",r);case 15:r.total>a&&r.total<=s&&(s=r.total);case 16:o=a;case 17:if(o==s){t.next=39;break}return t.next=20,this.abi.methods.getIndex(o).call();case 20:if(i=t.sent,u=void 0,void 0!=i){t.next=26;break}return t.abrupt("return",!1);case 26:return t.next=28,this.abi.methods.getPostProfile(i).call();case 28:return l=t.sent,t.next=31,this.abi.methods.getBlockNumber(i).call();case 31:c=t.sent;try{u=JSON.parse(web3.toUtf8(l))}catch(p){u={}}u.id=i,u.block_number=c,r.data.push(u);case 36:o++,t.next=17;break;case 39:return t.abrupt("return",r);case 40:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}(),q=A,z=[{constant:!1,inputs:[{name:"_id",type:"bytes32"},{name:"_profile",type:"string"}],name:"newPostProfile",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_id",type:"bytes32"}],name:"getPostProfile",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_id",type:"bytes32"}],name:"getBlockNumber",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalPost",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_pos",type:"uint256"}],name:"getIndex",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"}],G=z,K={name:"Main",components:{Search:C,Tablist:F},data:function(){return{data:[],ids:[]}},methods:{getData:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e),!this.ids.includes(e)){t.next=3;break}return t.abrupt("return");case 3:return n=new q(G,"0x391e627b6251724469ef8e51b7e21071573564b3"),t.next=6,n.get(e);case 6:for(r=t.sent,a=0;a!=this.data.length;a++)this.data[a].visible=!1;r.visible=!0,this.data.push(r),this.ids.push(e),console.log(this.data);case 12:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}},Q=K,V=Object(c["a"])(Q,w,g,!1,null,null,null),W=V.exports,Y={name:"app",components:{Header:b,Footer:y,Main:W}},Z=Y,tt=(n("034f"),Object(c["a"])(Z,a,s,!1,null,null,null)),et=tt.exports,nt=n("5f5b");n("f9e3"),n("2dd8");r["default"].config.productionTip=!1,r["default"].use(nt["a"]),new r["default"]({render:function(t){return t(et)}}).$mount("#app")},"64a9":function(t,e,n){}});
//# sourceMappingURL=app.4438c9e3.js.map